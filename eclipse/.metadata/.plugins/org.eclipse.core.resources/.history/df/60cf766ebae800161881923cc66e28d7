package escapemc.Command;

import java.util.ArrayList;

import escapemc.Command.commands.CommandBind;
import escapemc.Command.commands.CommandHelp;
import escapemc.Util.ChatUtil;

public class CommandManager {
	
	public static ArrayList<Command> Commands = new ArrayList<Command>();
	
	public CommandManager(){
		Commands = new ArrayList();
		//addCommand(new CommandBind());
		AddCommand(new CommandHelp());
	}
	
	public void AddCommand(Command c){
		Commands.add(c);
	}
	
	public static ArrayList<Command> RegisterCommands(){
		return Commands;
	}
	
	public static void callCommand(String s){
		if(s.startsWith("-")) {
			
			String msg = s.replace("-", "");
			String[] a = msg.split(" ");
			String command = a[0];
			String b = msg.replace(command, "");
			for(Command c: Commands()){
				if(c.getName().equalsIgnoreCase(command)){
					try{
						c.onCommand(b, b.split(" "));
					}catch(Exception e){
						ChatUtil.SendChatMessage("Invalid Command Usage!");
						ChatUtil.SendChatMessage(c.getSyntax());
					}
					return;
				}
			}
			ChatUtil.SendChatMessage("Command not found! Use -help for a list of all commands.");
		}
	}
}